<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->
<link rel="import" href="bower_components/polymer/polymer.html">
<script src="bower_components/vis/dist/vis.min.js"></script>

<!--
An element wrapping vis.js
So far just the Network modul is supported

Example:

    <vis-element></vis-element>

@group Seed Elements
@element vis-element
@demo demo/index.html
-->
<dom-module id="vis-element">
  <template>
    <style>
      :host {
        display: block;
        box-sizing: border-box;
      }
      #container {
        width: 100%;
        height: 100%;
      }
    </style>

    <div id="container"></div>

  </template>
</dom-module>

<script>
  Polymer({
    is: 'vis-element',
    properties: {
      data: Object,
      network: Object,
      options: {
        type: Object,
        value: {
          autoResize: true,
          height: '100%',
          width: '100%'
        }
      },
      width: {
        type: String,
        observer: '_widthChanged'
      },
      height: {
        type: String,
        observer: '_heightChanged'
      }
    },

    attached: function() {},
    setData: function(data) {
      this.data = data;
      var container = document.getElementById('container');
      this.network = new vis.Network(container, this.data, this.options);
    },
    importDotString: function(dotString) {
      var parsedData = vis.network.convertDot(dotString);
      this.options = parsedData.options;
      var data = {
        nodes: parsedData.nodes,
        edges: parsedData.edges
      }
      this.setData(data);
    },
    setOptions: function(options) {
      if(this.network === undefined)
      {
        console.error('network is undefined');
        return false;
      }
      this.network.setOptions = value;
    },
    _widthChanged: function(value) {
      document.getElementById('container').style.width = value;
    },
    _heightChanged: function(value) {
      document.getElementById('container').style.height = value;
    }
  });
</script>
